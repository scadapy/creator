<!--###########################################################################
## Html code generated with ScadaPy Creator v.3.5.3  14.07.2018 
## Html Client by Jack Mas
## http://scadapy.ln-group.ru/
##
## PLEASE DO ALL YOU NEED THIS FILE!
########################################################################### -->
<!DOCTYPE html>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta charset="utf-8">
<title>ScadaPy Html client</title>
<script type="text/javascript">
var Host="http://127.0.0.1:8080/data";
var Login='root';
var Password='root';
var resp="0";
var WaterTemp;
var Alias_WaterTemp='WaterTemp';
var EngineOnOff;
var Alias_EngineOnOff='Дизель генератор';
function init()  {   setInterval(function(){ getData();}, 1000); }
function getData() {
if (window.XMLHttpRequest) {  xmlhttp=new XMLHttpRequest();                        }
else                       {  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");      }
xmlhttp.open("GET",Host,true);
xmlhttp.setRequestHeader("Authorization", "Basic " + btoa(Login+":"+Password));
xmlhttp.withCredentials = true;
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send(null);
xmlhttp.onreadystatechange=function()   {
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
resp= xmlhttp.responseText;
parseResp=JSON.parse(resp);
document.getElementById("recv").innerHTML=resp;
try      { document.getElementById("WaterTemp").innerHTML=Alias_WaterTemp+': '+ parseResp[0].WaterTemp; }
catch(e) { document.getElementById("WaterTemp").innerHTML=Alias_WaterTemp+': 0'; }
try      { document.getElementById("i1").contentDocument.getElementById("SVG_WaterTemp").textContent=parseResp[0].WaterTemp.toFixed(3); }
catch(e) {
try      { document.getElementById("i1").contentDocument.getElementById("SVG_WaterTemp").textContent=parseResp[0].WaterTemp; }
catch(e) { document.getElementById("i1").contentDocument.getElementById("SVG_WaterTemp").textContent=0; }
         }
try      { document.getElementById("EngineOnOff").innerHTML=Alias_EngineOnOff+': '+ parseResp[1].EngineOnOff; }
catch(e) { document.getElementById("EngineOnOff").innerHTML=Alias_EngineOnOff+': 0'; }
try {
document.getElementById("i1").contentDocument.getElementById("SVG_EngineOnOff").textContent=parseResp[1].EngineOnOff;
if(parseResp[1].EngineOnOff == true) { document.getElementById("i1").contentDocument.getElementById("REC_EngineOnOff").setAttribute("fill", "red"); }
else { document.getElementById("i1").contentDocument.getElementById("REC_EngineOnOff").setAttribute("fill", "green"); }
} catch(e) {
document.getElementById("i1").contentDocument.getElementById("SVG_EngineOnOff").textContent=0; }
}  }  }
</script>
<body onload="init()" style="background-color:white" >
<span id="recv"></span><br>
<span id="WaterTemp"></span><br>
<span id="EngineOnOff"></span><br>
<br><br><iframe id="i1" width="800" height="105"  src="./image.svg" ></iframe>
</body></html>
